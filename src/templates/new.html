{% extends "base.html" %}

{% block title %}New Reference{% endblock %}

{% block content %}
<div class="container mt-4">
    <h3 class="text-center">New Reference</h3>
    <br>
    <!-- Dropdown for Reference Type Selection -->
    <div class="form-group">
        <label for="referenceType">Reference Type:</label>
        <select class="form-control-dropdown" id="referenceType" onchange="updateFormFields()">
            <option value="article">Article</option>
            <option value="book">Book</option>
            <option value="inproceeding">Inproceeding</option>
        </select>
    </div>
    <!-- Article Form -->
    <div id="articleFields" style="display: none;">
        <form method="post" class="needs-validation">
            <input type="hidden" name="type" value="article">
            <!-- Article Form Fields -->
            <div class="form-group">
                <label for="author">Author:</label>
                <input type="text" class="form-control" name="author" id="author" required>
            </div>
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" class="form-control" name="title" id="title" required>
            </div>
            <div class="form-group">
                <label for="journal">Journal:</label>
                <input type="text" class="form-control" name="journal" id="journal" required>
            </div>
            <div class="form-group">
                <label for="year">Year:</label>
                <input type="number" class="form-control" name="year" id="year" required>
            </div>
            <div class="form-group">
                <label for="volume">Volume:</label>
                <input type="text" class="form-control" name="volume" id="volume">
            </div>
            <div class="form-group">
                <label for="pages">Pages:</label>
                <input type="text" class="form-control" name="pages" pattern="\d+([- ]+\d+)?" id="pages">
            </div>
            <div class="form-group">
                <label for="tag">Tag:</label>
                <input type="text" class="form-control" name="tag" pattern="\d+([- ]+\d+)?" id="tag">
            </div>
            <div class="d-flex justify-content-center">
            <button type="submit" class="btn btn-primary">Save</button>
        </div>
        </form>
    </div>

    <!-- Book Form -->
    <div id="bookFields" style="display: none;">
        <form method="post" class="needs-validation">
            <input type="hidden" name="type" value="book">
            <!-- Book Form Fields -->
            <div class="form-group">
                <label for="author">Author:</label>
                <input type="text" class="form-control" name="author" id="author" required>
            </div>
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" class="form-control" name="title" id="title" required>
            </div>
            <div class="form-group">
                <label for="publisher">Publisher:</label>
                <input type="text" class="form-control" name="publisher" id="publisher" required>
            </div>
            <div class="form-group">
                <label for="year">Year:</label>
                <input type="number" class="form-control" name="year" id="year" required>
            </div>
            <div class="form-group">
                <label for="volume">Volume:</label>
                <input type="text" class="form-control" name="volume" id="volume">
            </div>
            <div class="form-group">
                <label for="pages">Pages:</label>
                <input type="text" class="form-control" name="pages" pattern="\d+([- ]+\d+)?" id="pages">
            </div>
            <div class="form-group">
                <label for="tag">Tag:</label>
                <input type="text" class="form-control" name="tag" pattern="\d+([- ]+\d+)?" id="tag">
            </div>
            <div class="d-flex justify-content-center">
            <button type="submit" class="btn btn-primary">Save</button>
        </div>
        </form>
    </div>

    <!-- Inproceeding Form -->
    <div id="inproceedingFields" style="display: none;">
        <form method="post" class="needs-validation">
            <input type="hidden" name="type" value="inproceeding">
            <!-- Inproceeding Form Fields -->
            <div class="form-group">
                <label for="author">Author:</label>
                <input type="text" class="form-control" name="author" id="author" required>
            </div>
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" class="form-control" name="title" id="title" required>
            </div>
            <div class="form-group">
                <label for="booktitle">Booktitle:</label>
                <input type="text" class="form-control" name="booktitle" id="booktitle" required>
            </div>
            <div class="form-group">
                <label for="year">Year:</label>
                <input type="number" class="form-control" name="year" id="year" required>
            </div>
            <div class="form-group">
                <label for="pages">Pages:</label>
                <input type="text" class="form-control" name="pages" pattern="\d+([- ]+\d+)?" id="pages">
            </div>
            <div class="form-group">
                <label for="tag">Tag:</label>
                <input type="text" class="form-control" name="tag" pattern="\d+([- ]+\d+)?" id="tag">
            </div>
            <div class="d-flex justify-content-center">
            <button type="submit" class="btn btn-primary">Save</button>
        </div>
        </form>
    </div>
</div>


<script>
    function updateFormFields() {
        var selection = document.getElementById('referenceType').value;
        document.getElementById('articleFields').style.display = (selection === 'article') ? 'block' : 'none';
        document.getElementById('bookFields').style.display = (selection === 'book') ? 'block' : 'none';
        document.getElementById('inproceedingFields').style.display = (selection === 'inproceeding') ? 'block' : 'none';
    }

    // Initialize the forms display on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateFormFields(); 
    });
</script>


{% endblock %}
